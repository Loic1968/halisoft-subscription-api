â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    HaliSoft Subscription System - Visual Architecture Guide
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ¯ CORE PRINCIPLE                               â”‚
â”‚                                                                     â”‚
â”‚  "Configuration should live in the database, not in code."         â”‚
â”‚                                                                     â”‚
â”‚  Admin can modify ALL pricing and features via dashboard           â”‚
â”‚  WITHOUT touching code or redeploying!                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š DATABASE SCHEMA (Configuration-First Design)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SubscriptionPlan   â”‚         â”‚   AIComponent       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ name            â”‚         â”‚ â€¢ name              â”‚
â”‚ â€¢ slug            â”‚         â”‚ â€¢ slug              â”‚
â”‚ â€¢ basePrice âœï¸    â”‚         â”‚ â€¢ category          â”‚
â”‚ â€¢ billingPeriod   â”‚         â”‚ â€¢ baseTokenCost     â”‚
â”‚ â€¢ isActive        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
         â”‚                                â”‚
         â”‚                                â”‚
         â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”
         â””â”€â”€â”€â”€â”€â”€â”€â”¤    PlanFeature            â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                 â”‚ â€¢ planId                  â”‚
                 â”‚ â€¢ aiComponentId           â”‚
                 â”‚ â€¢ enabled âœï¸              â”‚
                 â”‚ â€¢ limitValue âœï¸           â”‚
                 â”‚ â€¢ limitType               â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Controls what users get
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Subscription     â”‚          â”‚   UsageTracking      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ userId          â”‚          â”‚ â€¢ subscriptionId     â”‚
â”‚ â€¢ planId          â”‚          â”‚ â€¢ aiComponentId      â”‚
â”‚ â€¢ status          â”‚          â”‚ â€¢ value (usage)      â”‚
â”‚ â€¢ currentPeriodEndâ”‚          â”‚ â€¢ periodStart        â”‚
â”‚ â€¢ paypalSubId     â”‚          â”‚ â€¢ periodEnd          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœï¸ = Modifiable by admin via dashboard


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ REQUEST FLOW - User Executes AI Component
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend                  Backend                     Database
â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€                     â”€â”€â”€â”€â”€â”€â”€â”€

   ğŸ‘¤ User
   â”‚
   â”‚ 1. Click "Analyze Invoice"
   â”‚
   â–¼
useAIComponent
   â”‚
   â”‚ execute({ invoiceData })
   â”‚
   â–¼
POST /api/ai/invoice-ocr/analyze
   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  authenticateUser
   â”‚                         â”‚
   â”‚                         â”‚ Verify JWT
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         âœ… User authenticated
   â”‚                         â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  checkSubscription
   â”‚                         â”‚
   â”‚                         â”‚ Query DB:
   â”‚                         â”‚   SELECT * FROM subscriptions
   â”‚                         â”‚   WHERE userId = ? AND status = 'ACTIVE'
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         âœ… Active subscription found â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  subscriptions
   â”‚                         â”‚                                       table
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  enforceQuota('invoice_ocr')
   â”‚                         â”‚
   â”‚                         â”‚ Query DB:
   â”‚                         â”‚   SELECT * FROM plan_features
   â”‚                         â”‚   WHERE planId = ? AND aiComponentId = ?
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         ğŸ“‹ Feature enabled? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  plan_features
   â”‚                         â”‚  YES âœ…                                table
   â”‚                         â”‚
   â”‚                         â”‚ Query DB:
   â”‚                         â”‚   SELECT SUM(value) FROM usage_tracking
   â”‚                         â”‚   WHERE subscriptionId = ?
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         ğŸ“Š Usage: 47 / 100 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  usage_tracking
   â”‚                         â”‚  OK âœ…                                 table
   â”‚                         â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Route Handler
   â”‚                         â”‚
   â”‚                         â”‚ Call Anthropic Claude API
   â”‚                         â”‚   analyze_invoice(data)
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         ğŸ¤– Claude API Result
   â”‚                         â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  trackUsage('invoice_ocr', 1)
   â”‚                         â”‚
   â”‚                         â”‚ INSERT INTO usage_tracking
   â”‚                         â”‚   value = value + 1
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         âœ… Usage: 48 / 100 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  usage_tracking
   â”‚                         â”‚                                       updated
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                         â”‚ Response:
   â”‚ { analysis, quota }     â”‚ { result, quota: { used: 48, limit: 100 } }
   â”‚
   â–¼
Display result
Update quota bar
(48% full)


IF quota exceeded (48 >= 100):
   â”‚
   â–¼
enforceQuota returns 429
   â”‚
   â–¼
Frontend shows:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   âš ï¸  Quota Exceeded               â”‚
â”‚                                    â”‚
â”‚   You've used 100/100 analyses    â”‚
â”‚   this month.                      â”‚
â”‚                                    â”‚
â”‚   [Upgrade Plan] [Contact Sales]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš™ï¸ ADMIN CHANGES PRICING - Configuration-First in Action
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Admin Dashboard           Backend                     Database
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€                     â”€â”€â”€â”€â”€â”€â”€â”€

   ğŸ‘¨â€ğŸ’¼ Admin
   â”‚
   â”‚ 1. Change Starter price to $349
   â”‚
   â–¼
[Save Changes]
   â”‚
   â”‚
   â–¼
PATCH /api/admin/plans/starter
Body: { basePrice: 349.00 }
   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  requireAdmin
   â”‚                         â”‚
   â”‚                         â”‚ Verify admin role
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         âœ… Admin authorized
   â”‚                         â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Admin Route Handler
   â”‚                         â”‚
   â”‚                         â”‚ 1. Load current plan
   â”‚                         â”‚    SELECT * FROM subscription_plans
   â”‚                         â”‚    WHERE slug = 'starter'
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         ğŸ“‹ Plan loaded â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  subscription_plans
   â”‚                         â”‚  basePrice: $299                     table
   â”‚                         â”‚
   â”‚                         â”‚ 2. Update database
   â”‚                         â”‚    UPDATE subscription_plans
   â”‚                         â”‚    SET basePrice = 349.00
   â”‚                         â”‚    WHERE slug = 'starter'
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         âœ… Database updated â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  basePrice: $349
   â”‚                         â”‚                                      âœ¨ NO DEPLOYMENT!
   â”‚                         â”‚
   â”‚                         â”‚ 3. Sync to PayPal
   â”‚                         â”‚    PayPalService.updatePlanPricing()
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                     â”‚  PayPal API   â”‚
   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                     â”‚ Create new    â”‚
   â”‚                     â”‚ billing plan  â”‚
   â”‚                     â”‚ Price: $349   â”‚
   â”‚                     â”‚ Deactivate    â”‚
   â”‚                     â”‚ old plan      â”‚
   â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         ğŸ”„ New PayPal Plan ID
   â”‚                         â”‚
   â”‚                         â”‚ 4. Update paypalPlanId in DB
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         âœ… Synced â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  paypalPlanId updated
   â”‚                         â”‚
   â”‚                         â”‚ 5. Create audit log
   â”‚                         â”‚    INSERT INTO audit_logs
   â”‚                         â”‚    (userId, action, changesBefore, changesAfter)
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         ğŸ“ Audit trail â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  audit_logs
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                      entry created
   â”‚                         â”‚
   â”‚ { success: true }       â”‚ Response: { plan: { basePrice: 349 } }
   â”‚
   â–¼
âœ… Success message
"Pricing updated!"


IMMEDIATE EFFECTS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ Pricing page shows $349 (dynamic load)  â”‚
â”‚  â€¢ New subscriptions charged $349          â”‚
â”‚  â€¢ Existing subscriptions unaffected       â”‚
â”‚  â€¢ PayPal billing plan updated             â”‚
â”‚  â€¢ Audit trail logged                      â”‚
â”‚  â€¢ ZERO CODE CHANGES                       â”‚
â”‚  â€¢ ZERO DOWNTIME                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” MONTHLY QUOTA RESET - Automated Cron Job
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cron Scheduler               Backend                     Database
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€                     â”€â”€â”€â”€â”€â”€â”€â”€

â° Daily at midnight
   â”‚
   â”‚ 0 0 * * *
   â”‚
   â–¼
Run: npm run cron:quotas
   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  reset-monthly-quotas.ts
   â”‚                         â”‚
   â”‚                         â”‚ 1. Find expiring subscriptions
   â”‚                         â”‚    SELECT * FROM subscriptions
   â”‚                         â”‚    WHERE currentPeriodEnd = TODAY
   â”‚                         â”‚    AND status = 'ACTIVE'
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         ğŸ“‹ Found 152 subscriptions â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  subscriptions
   â”‚                         â”‚                                     table
   â”‚                         â”‚
   â”‚                         â”‚ FOR EACH subscription:
   â”‚                         â”‚
   â”‚                         â”‚ 2. Get last month usage
   â”‚                         â”‚    SELECT * FROM usage_tracking
   â”‚                         â”‚    WHERE subscriptionId = ?
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         ğŸ“Š Usage:                             usage_tracking
   â”‚                         â”‚  invoice_ocr: 87/100               table
   â”‚                         â”‚  risk_assessment: 42/50
   â”‚                         â”‚
   â”‚                         â”‚ 3. Send monthly report email
   â”‚                         â”‚    EmailService.sendMonthlyReport()
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                     â”‚  ğŸ“§ Email     â”‚
   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                     â”‚ Subject:      â”‚
   â”‚                     â”‚ "Your Usage   â”‚
   â”‚                     â”‚  Report"      â”‚
   â”‚                     â”‚               â”‚
   â”‚                     â”‚ Component     â”‚
   â”‚                     â”‚ Invoice OCR   â”‚
   â”‚                     â”‚  87/100       â”‚
   â”‚                     â”‚ Risk Assess.  â”‚
   â”‚                     â”‚  42/50        â”‚
   â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                         â”‚
   â”‚                         â”‚ 4. Reset usage counters
   â”‚                         â”‚    DELETE FROM usage_tracking
   â”‚                         â”‚    WHERE periodEnd <= TODAY
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         ğŸ—‘ï¸  Old usage deleted â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  usage_tracking
   â”‚                         â”‚                                      cleaned
   â”‚                         â”‚
   â”‚                         â”‚ 5. Update subscription period
   â”‚                         â”‚    UPDATE subscriptions
   â”‚                         â”‚    SET currentPeriodStart = TODAY
   â”‚                         â”‚        currentPeriodEnd = TODAY + 30 days
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         ğŸ“… Period updated â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  subscriptions
   â”‚                         â”‚                                      updated
   â”‚                         â”‚
   â”‚                         â”‚ 6. Initialize new period tracking
   â”‚                         â”‚    INSERT INTO usage_tracking
   â”‚                         â”‚    (subscriptionId, value = 0, ...)
   â”‚                         â”‚
   â”‚                         â–¼
   â”‚                         âœ¨ Fresh quotas â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  usage_tracking
   â”‚                         â”‚  invoice_ocr: 0/100                  initialized
   â”‚                         â”‚  risk_assessment: 0/50
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                         â”‚
   â”‚ âœ… 152 subscriptions    â”‚ Log: "Quotas reset for 152 subscriptions"
   â”‚    reset successfully   â”‚
   â”‚
   â–¼
Next run: tomorrow midnight


USER EXPERIENCE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ User wakes up on 1st of month          â”‚
â”‚                                            â”‚
â”‚  ğŸ“§ Email: "Your usage report"             â”‚
â”‚     Last month: 87/100 invoice analyses    â”‚
â”‚                                            â”‚
â”‚  ğŸ”„ Dashboard shows: 0/100                 â”‚
â”‚     Fresh quota for new month!             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’° REVENUE METRICS - Admin Dashboard
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Database Query:

    SELECT
      subscription_plans.name AS plan,
      COUNT(subscriptions.id) AS active_subs,
      subscription_plans.base_price AS price,
      CASE
        WHEN billing_period = 'yearly' THEN base_price / 12
        ELSE base_price
      END AS monthly_price,
      COUNT(*) * monthly_price AS plan_mrr
    FROM subscriptions
    JOIN subscription_plans ON subscriptions.plan_id = subscription_plans.id
    WHERE subscriptions.status = 'ACTIVE'
    GROUP BY subscription_plans.id

Results:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Plan         â”‚ Active     â”‚ Price  â”‚ Plan MRR  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Starter      â”‚ 245        â”‚ $299   â”‚ $73,255   â”‚
â”‚ Professional â”‚ 89         â”‚ $799   â”‚ $71,111   â”‚
â”‚ Enterprise   â”‚ 12         â”‚ Custom â”‚ $36,000   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL        â”‚ 346        â”‚        â”‚ $180,366  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MRR: $180,366
ARR: $2,164,392 (MRR Ã— 12)


Admin Dashboard Display:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Revenue Metrics                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  ğŸ’° MRR:  $180,366                                        â”‚
â”‚  ğŸ“ˆ ARR:  $2,164,392                                      â”‚
â”‚                                                           â”‚
â”‚  ğŸ“Š Breakdown by Plan:                                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”         â”‚
â”‚  Starter        245 subs    40% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘          â”‚
â”‚  Professional    89 subs    39% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘          â”‚
â”‚  Enterprise      12 subs    21% â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘          â”‚
â”‚                                                           â”‚
â”‚  ğŸ¯ Most Popular: Starter (70% of new signups)           â”‚
â”‚  ğŸ“ˆ Growth Rate: +12% MoM                                 â”‚
â”‚  ğŸ’¸ Churn Rate:  3.2%                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“± USER DASHBOARD - Real-Time Usage Display
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend Hook:

    const { subscription, usage } = useSubscription();

Data Loaded:

    usage = {
      invoice_ocr: {
        used: 87,
        limit: 100,
        percentage: 87,
        resetDate: '2025-02-01'
      },
      risk_assessment: {
        used: 42,
        limit: 50,
        percentage: 84,
        resetDate: '2025-02-01'
      }
    }

Display:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Your Usage                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  Invoice OCR & Analysis                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”         â”‚
â”‚  87 / 100 used                                       87%  â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â”‚
â”‚  Resets: Feb 1, 2025                                      â”‚
â”‚                                                           â”‚
â”‚  Risk Assessment                                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”         â”‚
â”‚  42 / 50 used                                        84%  â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â”‚
â”‚  âš ï¸  Approaching limit. Consider upgrading.               â”‚
â”‚  Resets: Feb 1, 2025                                      â”‚
â”‚                                                           â”‚
â”‚  [Upgrade Plan]  [View All Features]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ KEY SUCCESS METRICS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Configuration-First:
   Admin modifies pricing WITHOUT deployment â”€â”€â”€â–º âœ¨ ACHIEVED

âœ… Dynamic Feature Gating:
   Plan access controlled by database â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ¨ ACHIEVED

âœ… Real-Time Quota Enforcement:
   Usage tracked & enforced per component â”€â”€â”€â”€â”€â”€â–º âœ¨ ACHIEVED

âœ… PayPal Integration:
   Automated billing with webhooks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ¨ ACHIEVED

âœ… Multi-Tenant Support:
   White-label deployments ready â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ¨ ACHIEVED

âœ… Audit Trail:
   All admin changes logged â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ¨ ACHIEVED

âœ… Email Automation:
   Quota warnings & reports â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ¨ ACHIEVED

âœ… Zero Downtime:
   Price changes live immediately â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ¨ ACHIEVED


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ DEPLOYMENT WORKFLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Local                    Railway                     Production
â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€                     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Develop
   â”œâ”€ Write code
   â”œâ”€ Test locally
   â””â”€ Commit to Git
         â”‚
         â”‚ git push
         â–¼
                     2. Auto-Build
                        â”œâ”€ npm install
                        â”œâ”€ npm run build
                        â””â”€ Run tests
                              â”‚
                              â”‚ If tests pass
                              â–¼
                                              3. Auto-Deploy
                                                 â”œâ”€ Run migrations
                                                 â”œâ”€ Start server
                                                 â””â”€ Health check
                                                       â”‚
                                                       â–¼
                                                   âœ… Live!

4. Admin Changes Pricing (NO DEPLOYMENT!)
   â”œâ”€ Login to dashboard
   â”œâ”€ Change Starter: $299 â†’ $349
   â”œâ”€ Click Save
   â””â”€ âœ¨ Live immediately!

5. Cron Jobs (Automatic)
   â”œâ”€ Daily at midnight: Reset quotas
   â””â”€ Every 6 hours: Send warnings


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ‰ FINAL RESULT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

What We Built:

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Complete Subscription System for AI Components        â”‚
    â”‚                                                         â”‚
    â”‚  âœ… 3 Plans (Starter, Professional, Enterprise)        â”‚
    â”‚  âœ… 6 AI Components (Invoice OCR, Risk, Audit, etc.)   â”‚
    â”‚  âœ… PayPal Billing (automated subscriptions)           â”‚
    â”‚  âœ… Quota Enforcement (real-time tracking)             â”‚
    â”‚  âœ… Admin Dashboard (modify without deployment)        â”‚
    â”‚  âœ… User Dashboard (live usage stats)                  â”‚
    â”‚  âœ… Email Automation (warnings, reports, receipts)     â”‚
    â”‚  âœ… Multi-Tenant (white-label ready)                   â”‚
    â”‚  âœ… Audit Trail (all changes logged)                   â”‚
    â”‚  âœ… Cron Jobs (automated quota resets)                 â”‚
    â”‚  âœ… Complete Documentation (README, guides, tests)     â”‚
    â”‚                                                         â”‚
    â”‚  ğŸ¯ Configuration-First Design                         â”‚
    â”‚     â†’ All pricing/features in database                 â”‚
    â”‚     â†’ Admin changes without code                       â”‚
    â”‚     â†’ Zero deployment for config changes               â”‚
    â”‚                                                         â”‚
    â”‚  ğŸš€ Production Ready                                   â”‚
    â”‚     â†’ Deploy to Railway/Vercel in minutes              â”‚
    â”‚     â†’ Auto-scaling, monitoring, backups                â”‚
    â”‚     â†’ SSL, health checks, cron jobs                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Business Value:

    ğŸ’° Launch Fast:  MVP ready in 15 minutes
    ğŸ“ˆ Iterate Fast: Change pricing without deployment
    ğŸ¨ Flexible:     Add/remove features dynamically
    ğŸ’ª Scalable:     Handles thousands of subscriptions
    ğŸ”’ Secure:       JWT auth, PayPal verification, audit logs
    ğŸ“Š Insights:     Usage analytics, revenue metrics


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“š WHERE TO GO NEXT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… Read:   README.md (complete documentation)
2. âœ… Setup:  QUICK_START.md (15-minute guide)
3. âœ… Learn:  ARCHITECTURE.md (system design)
4. âœ… Deploy: DEPLOYMENT_CHECKLIST.md (production)
5. âœ… Build:  Start developing features!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Built with â¤ï¸ by HaliSoft Team
Powered by: Node.js + Express + Prisma + PayPal + Claude API

Ready to launch! ğŸš€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
